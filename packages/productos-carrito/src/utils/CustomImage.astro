---
import type { ImageMetadata } from 'astro';
import { Image } from "astro:assets";

export type Load = 'lazy' | 'eager';

interface Props {
  path: string;
  alt: string;
  className: string
  load: Load;
 }
 const { path, alt, className, load } = Astro.props;

// buscar las imagenes dentro de 'src/assets/images'
 const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/*.{jpeg,jpg,png,webp,gif}');
 
 // Concatenar el nombre de la imagen con la ruta para validar su existencia en obj images
 const fullPath = `/src/assets/images/${path}`;

 // en caso la ruta de la imagen no exista en images
 if (!images[fullPath]) throw new Error(`"${path}"`)
---
<figure>
  <Image 
    src={images[fullPath]()} 
    alt={alt} 
    class={className}
    loading={load}
  />
</figure>
